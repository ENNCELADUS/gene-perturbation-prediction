{
  "config": {
    "data": {
      "h5ad_path": "data/norman/perturb_processed.h5ad"
    },
    "split": {
      "min_cells_per_condition": 50,
      "query_fraction": 0.2,
      "min_query_cells": 10,
      "seed": 42,
      "output_path": "data/norman/splits/cell_split_seed42.json"
    },
    "track": "in_dist",
    "condition_split": {
      "train_ratio": 0.7,
      "val_ratio": 0.1,
      "test_ratio": 0.2,
      "seed": 42,
      "output_path": "data/norman/splits/condition_split_in_dist_seed42.json",
      "n_holdout_genes": 5
    },
    "model": {
      "encoder": "logreg",
      "C": 1.0,
      "max_iter": 1000,
      "solver": "lbfgs"
    },
    "library": {
      "type": "bootstrap",
      "n_prototypes": 30,
      "m_cells_per_prototype": 50,
      "seed": 42
    },
    "retrieval": {
      "metric": "prob",
      "top_k": [
        1,
        5,
        8,
        10
      ]
    },
    "query": {
      "mode": "cell",
      "query_split": "test",
      "candidate_source": "all",
      "pseudo_bulk": {
        "cells_per_bulk": 50,
        "n_bulks": 1,
        "seed": 42
      },
      "pseudo_bulk_curve": {
        "enable": false,
        "cells_per_bulk_values": [
          10,
          25,
          50,
          100,
          200
        ],
        "n_bulks": 5,
        "seed": 42
      }
    },
    "evaluate": {
      "mask_perturbed": true,
      "mask_ablation": true
    },
    "confidence": {
      "enable": true,
      "method": "margin",
      "coverage_points": 20,
      "top_k_agreement": 1
    },
    "report": {
      "enable": false,
      "result_dirs": [],
      "output_dir": "results/reports",
      "report_name": "comparison_report"
    },
    "logging": {
      "output_dir": "results/",
      "experiment_name": "logreg"
    }
  },
  "summary": {
    "h5ad_path": "data/norman/perturb_processed.h5ad",
    "loaded": true,
    "has_split": true,
    "n_cells": 91205,
    "n_genes": 5045,
    "n_control_cells": 7353,
    "n_perturbed_cells": 83852,
    "n_conditions": 282,
    "n_ref_cells": 67152,
    "n_query_cells": 16651,
    "n_valid_conditions": 282,
    "n_dropped_conditions": 1,
    "split_seed": 42
  },
  "metrics": {
    "exact_hit@1": 0.3532520569335175,
    "exact_hit@5": 0.6430844994294637,
    "exact_hit@8": 0.7101675575040538,
    "exact_hit@10": 0.7382739775388866,
    "mrr": 0.47595601770426105,
    "relevant_hit@1": 0.625127619962765,
    "relevant_hit@5": 0.811302624466999,
    "relevant_hit@8": 0.8502792625067563,
    "relevant_hit@10": 0.8658338838508197,
    "ndcg@1": 0.3532520569335175,
    "ndcg@5": 0.508110244556917,
    "ndcg@8": 0.5307178789072208,
    "ndcg@10": 0.5390120425419843,
    "macro_hit@1": 0.3101654142435005,
    "macro_hit@5": 0.6004880871293267,
    "n_queries": 16651,
    "n_in_pool": 16651,
    "n_conditions": 282,
    "confidence_auc": 0.5129932121966054,
    "coverage_accuracy_curve": {
      "coverage": [
        0.05,
        0.1,
        0.15,
        0.2,
        0.25,
        0.3,
        0.35,
        0.39999999999999997,
        0.44999999999999996,
        0.49999999999999994,
        0.5499999999999999,
        0.6,
        0.65,
        0.7,
        0.75,
        0.7999999999999999,
        0.85,
        0.9,
        0.95,
        1.0
      ],
      "accuracy": [
        0.8798076923076923,
        0.8258258258258259,
        0.7657188626351622,
        0.715015015015015,
        0.6681883709754926,
        0.6316316316316316,
        0.5979062982666895,
        0.565015015015015,
        0.5399092365189535,
        0.5162762762762763,
        0.4956322341122516,
        0.4744744744744745,
        0.4535710985863439,
        0.4367224367224367,
        0.4201633568225496,
        0.4045045045045045,
        0.3895287218257613,
        0.3778445111778445,
        0.365406498925275,
        0.3532520569335175
      ]
    }
  },
  "metrics_mask_off": {
    "exact_hit@1": 0.39054711428743016,
    "exact_hit@5": 0.6817007987508258,
    "exact_hit@8": 0.7418173082697735,
    "exact_hit@10": 0.7662602846675876,
    "mrr": 0.5149845378465281,
    "relevant_hit@1": 0.67143114527656,
    "relevant_hit@5": 0.8330430604768483,
    "relevant_hit@8": 0.8658338838508197,
    "relevant_hit@10": 0.880487658398895,
    "ndcg@1": 0.39054711428743016,
    "ndcg@5": 0.5482062929841794,
    "ndcg@8": 0.5684998541610268,
    "ndcg@10": 0.5757106131856673,
    "macro_hit@1": 0.34196557442187475,
    "macro_hit@5": 0.6400729124421721,
    "n_queries": 16651,
    "n_in_pool": 16651,
    "n_conditions": 282,
    "confidence_auc": 0.5540577422274763,
    "coverage_accuracy_curve": {
      "coverage": [
        0.05,
        0.1,
        0.15,
        0.2,
        0.25,
        0.3,
        0.35,
        0.39999999999999997,
        0.44999999999999996,
        0.49999999999999994,
        0.5499999999999999,
        0.6,
        0.65,
        0.7,
        0.75,
        0.7999999999999999,
        0.85,
        0.9,
        0.95,
        1.0
      ],
      "accuracy": [
        0.9122596153846154,
        0.8456456456456456,
        0.7993592310772928,
        0.7591591591591592,
        0.7131186929360884,
        0.6778778778778779,
        0.6493907671185859,
        0.6172672672672672,
        0.5902295782167646,
        0.5678078078078078,
        0.5422581349639659,
        0.5215215215215215,
        0.5016169269149034,
        0.480995280995281,
        0.46460602178090965,
        0.4464714714714715,
        0.4314986222002402,
        0.41708375041708373,
        0.4038437223416361,
        0.39054711428743016
      ]
    }
  }
}