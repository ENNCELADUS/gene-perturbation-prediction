# scGPT Retrieval Configuration for Reverse Perturbation Prediction

data:
  h5ad_path: data/norman/perturb_processed.h5ad

split:
  min_cells_per_condition: 50
  query_fraction: 0.2
  min_query_cells: 10
  seed: 42
  output_path: data/norman/splits/cell_split_seed42.json

library:
  type: bootstrap  # bootstrap | mean | raw_cell
  n_prototypes: 30
  m_cells_per_prototype: 50
  seed: 42

model:
  encoder: scgpt
  checkpoint: null  # Path to scGPT pretrained weights
  freeze_encoder: true
  use_lora: false
  lora_rank: 8

retrieval:
  metric: cosine  # cosine | euclidean
  top_k: [1, 5, 8, 10]

evaluate:
  mask_perturbed: true  # Anti-cheat: mask perturbed gene expression
  mask_ablation: false

logging:
  output_dir: results/
  experiment_name: scgpt_retrieval
